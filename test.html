<script>
    function initializeColumn() {
            const gridContainers = document.getElementById('grid-container').addEventListener('DOMContentLoaded', async function () {
            const userCode = editor.getValue(); // Get the code from CodeMirror
            const outputDiv = document.getElementById("output");
            const weird = document.getElementById("weird");

            // Send code to backend for execution
            try {
                const response = await fetch("http://127.0.0.1:5000/test", {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify({ code: userCode }),
                });

                const result = await response.json();

                if(result.error && result.error.length > 0){
                    outputDiv.textContent = result.error
                }
                else {
                    outputDiv.textContent = result.output || "No output";
                } 
            } catch (error) {
                outputDiv.textContent = "Failed to connect to the server.";
            }
        });

        const numTest = result.numTests;

        




      for (let i = 1; i <= numTest; i++) { // Create 5 rows in the column
        const rectangle = document.createElement('div');
        rectangle.classList.add('rectangle');
        rectangle.textContent = `${"Test: "} ${i}`; // Column is always 1, row is i
        gridContainers.appendChild(rectangle);
      }
    }
    
    // Initialize with one column of 5 rows
    initializeColumn();
    </script>
